//
//  NRMASwiftInstrumentationTests.swift
//  NewRelicAgent
//
//  Created by Bryce Buchanan on 10/21/14.
//  Copyright Â© 2023 New Relic. All rights reserved.
//

import Foundation
import XCTest


class NRMASwiftInstrumentationTests: XCTestCase {

    override func setUp() {
        super.setUp()
    }
    
    override func tearDown() {
        super.tearDown()
    }

    func testSwiftMethodProfiling() {
        let firstDataContainer : NRMAClassDataContainer = NRMAClassDataContainer(cls: NRMASwiftTest.self,
                                                                                 className: String.init(utf8String:class_getName(NRMASwiftTest.self)))
        XCTAssertTrue(NRMA__isSwiftClass(firstDataContainer), "")

        let secondDataContainer : NRMAClassDataContainer = NRMAClassDataContainer(cls: NRMASwiftTest.SubTest.self, className: String(cString: class_getName(NRMASwiftTest.SubTest.self)))
        XCTAssertTrue(NRMA__isSwiftClass(secondDataContainer), "")

        let thirdDataContainer : NRMAClassDataContainer = NRMAClassDataContainer(cls: TestRoot.self, className: String(cString: class_getName(TestRoot.self)))
        XCTAssertTrue(NRMA__isSwiftClass(thirdDataContainer), "")

        let fourthDataContainer : NRMAClassDataContainer = NRMAClassDataContainer(cls: NSObject.self,className: String(cString: class_getName(NSObject.self)))
        XCTAssertFalse(NRMA__isSwiftClass(fourthDataContainer),"")

        let fifthDataContainer : NRMAClassDataContainer = NRMAClassDataContainer(cls: TestRoot.SubObjc.self , className: String(cString: class_getName(TestRoot.SubObjc.self)))
        XCTAssertTrue(NRMA__isSwiftClass(fifthDataContainer), "")

        let sixthDataContainer : NRMAClassDataContainer = NRMAClassDataContainer(cls: NRMA_Swift_Trouble_Class.self, className: String(cString: class_getName(NRMA_Swift_Trouble_Class.self)))
        XCTAssertFalse(NRMA__isSwiftClass(sixthDataContainer),"")

        let seventhDataContainer : NRMAClassDataContainer = NRMAClassDataContainer(cls: Child.self, className: String(cString: class_getName(Child.self)))
        XCTAssertTrue(NRMA__isSwiftClass(seventhDataContainer),"")
    }


}
